# üîò –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—é –∫–Ω–æ–ø–∫–∏ –¥–ª—è –±—Ä–æ—Å–∫–∞ –∫–æ—Å—Ç–µ–π

## üìê –°—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–Ω–æ–ø–∫–∏

### –í–∞—Ä–∏–∞–Ω—Ç A: –ö–Ω–æ–ø–∫–∞ —Å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º –ø–æ–¥—Ç—è–≥–∏–≤–∞—é—â–∏–º —Ä–µ–∑–∏—Å—Ç–æ—Ä–æ–º (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

```
–ö–Ω–æ–ø–∫–∞
  ‚îú‚îÄ‚îÄ‚îÄ –û–¥–∏–Ω –∫–æ–Ω—Ç–∞–∫—Ç ‚Üí GPIO 15 (ESP32)
  ‚îî‚îÄ‚îÄ‚îÄ –î—Ä—É–≥–æ–π –∫–æ–Ω—Ç–∞–∫—Ç ‚Üí GND
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ü—Ä–æ—Å—Ç–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (2 –ø—Ä–æ–≤–æ–¥–∞)
- –ò—Å–ø–æ–ª—å–∑—É–µ–º –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π pull-up —Ä–µ–∑–∏—Å—Ç–æ—Ä ESP32
- –ù–∞–¥–µ–∂–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –í–∞—Ä–∏–∞–Ω—Ç –ë: –ö–Ω–æ–ø–∫–∞ —Å –≤–Ω–µ—à–Ω–∏–º —Ä–µ–∑–∏—Å—Ç–æ—Ä–æ–º

```
        3.3V
         ‚îÇ
         ‚îú‚îÄ‚îÄ‚îÄ 10kŒ© —Ä–µ–∑–∏—Å—Ç–æ—Ä
         ‚îÇ
GPIO 15 ‚îÄ‚î§
         ‚îÇ
         ‚îú‚îÄ‚îÄ‚îÄ –ö–Ω–æ–ø–∫–∞
         ‚îÇ
        GND
```

## üîå –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –ø–∏–Ω—ã –¥–ª—è –∫–Ω–æ–ø–∫–∏

| –ü–∏–Ω GPIO | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|----------|--------|------------|
| **GPIO 15** | ‚úÖ –õ–£–ß–®–ò–ô | –°–≤–æ–±–æ–¥–µ–Ω, –µ—Å—Ç—å pull-up |
| GPIO 13 | ‚úÖ –•–û–†–û–®–û | –°–≤–æ–±–æ–¥–µ–Ω |
| GPIO 12 | ‚úÖ –•–û–†–û–®–û | –°–≤–æ–±–æ–¥–µ–Ω |
| GPIO 14 | ‚úÖ –•–û–†–û–®–û | –°–≤–æ–±–æ–¥–µ–Ω |
| GPIO 27 | ‚úÖ –•–û–†–û–®–û | –°–≤–æ–±–æ–¥–µ–Ω |
| GPIO 26 | ‚úÖ –•–û–†–û–®–û | –°–≤–æ–±–æ–¥–µ–Ω |
| GPIO 25 | ‚úÖ –•–û–†–û–®–û | –°–≤–æ–±–æ–¥–µ–Ω |

**–ò–∑–±–µ–≥–∞–π—Ç–µ:**
- GPIO 0 (BOOT –∫–Ω–æ–ø–∫–∞)
- GPIO 2 (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è DC –¥–∏—Å–ø–ª–µ—è)
- GPIO 4 (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è RESET –¥–∏—Å–ø–ª–µ—è)
- GPIO 5 (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è CS –¥–∏—Å–ø–ª–µ—è)
- GPIO 18, 23 (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è SPI)

## üíª –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –∫–æ–¥: –ì–∏–±—Ä–∏–¥–Ω—ã–π —Ä–µ–∂–∏–º (–∫–Ω–æ–ø–∫–∞ + –∞–≤—Ç–æ–±—Ä–æ—Å)

–î–æ–±–∞–≤—å—Ç–µ –≤ –Ω–∞—á–∞–ª–æ [`src/main.cpp`](../src/main.cpp:1) –ø–æ—Å–ª–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö `#define`:

```cpp
// –ü–∏–Ω –∫–Ω–æ–ø–∫–∏
#define BUTTON_PIN 15

// –î–ª—è –∞–≤—Ç–æ–±—Ä–æ—Å–∫–∞
#define AUTO_ROLL_INTERVAL 10000  // 10 —Å–µ–∫—É–Ω–¥

// –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –∞–Ω—Ç–∏–¥—Ä–µ–±–µ–∑–≥–∞ –∫–Ω–æ–ø–∫–∏
unsigned long lastDebounceTime = 0;
unsigned long debounceDelay = 50;
unsigned long lastAutoRoll = 0;
```

–ò–∑–º–µ–Ω–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `setup()` - –¥–æ–±–∞–≤—å—Ç–µ –ø–æ—Å–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∏—Å–ø–ª–µ—è:

```cpp
void setup() {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ ...
  
  // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–Ω–æ–ø–∫–∏
  pinMode(BUTTON_PIN, INPUT_PULLUP);
  Serial.print("Button on GPIO ");
  Serial.println(BUTTON_PIN);
  
  // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ ...
}
```

–ò–∑–º–µ–Ω–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `loop()` –ø–æ–ª–Ω–æ—Å—Ç—å—é:

```cpp
void loop() {
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–Ω–æ–ø–∫–∏ (—Ä—É—á–Ω–æ–π –±—Ä–æ—Å–æ–∫)
  int buttonState = digitalRead(BUTTON_PIN);
  
  if (buttonState == LOW) {
    if ((millis() - lastDebounceTime) > debounceDelay) {
      Serial.println("Manual roll (button pressed)!");
      
      int dice1 = random(1, 7);
      int dice2 = random(1, 7);
      
      Serial.print("Dice 1: ");
      Serial.print(dice1);
      Serial.print("  Dice 2: ");
      Serial.println(dice2);
      
      tft.fillScreen(ST7735_BLACK);
      drawDice(DICE1_X, DICE_Y, dice1);
      drawDice(DICE2_X, DICE_Y, dice2);
      
      lastDebounceTime = millis();
      lastAutoRoll = millis();  // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ç–∞–π–º–µ—Ä –∞–≤—Ç–æ–±—Ä–æ—Å–∫–∞
      
      // –ñ–¥–µ–º –æ—Ç–ø—É—Å–∫–∞–Ω–∏—è –∫–Ω–æ–ø–∫–∏
      while(digitalRead(BUTTON_PIN) == LOW) {
        delay(10);
      }
    }
  }
  
  // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±—Ä–æ—Å–æ–∫ –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
  if (millis() - lastAutoRoll >= AUTO_ROLL_INTERVAL) {
    Serial.println("Auto roll (10 seconds elapsed)");
    
    int dice1 = random(1, 7);
    int dice2 = random(1, 7);
    
    Serial.print("Dice 1: ");
    Serial.print(dice1);
    Serial.print("  Dice 2: ");
    Serial.println(dice2);
    
    tft.fillScreen(ST7735_BLACK);
    drawDice(DICE1_X, DICE_Y, dice1);
    drawDice(DICE2_X, DICE_Y, dice2);
    
    lastAutoRoll = millis();
  }
  
  delay(10);
}
```

## üìã –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### –®–∞–≥ 1: –§–∏–∑–∏—á–µ—Å–∫–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

1. –í–æ–∑—å–º–∏—Ç–µ —Ç–∞–∫—Ç–æ–≤—É—é –∫–Ω–æ–ø–∫—É
2. –û–¥–∏–Ω –∫–æ–Ω—Ç–∞–∫—Ç ‚Üí GPIO 15
3. –î—Ä—É–≥–æ–π –∫–æ–Ω—Ç–∞–∫—Ç ‚Üí GND
4. –ì–æ—Ç–æ–≤–æ!

### –®–∞–≥ 2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ [`src/main.cpp`](../src/main.cpp)
2. –î–æ–±–∞–≤—å—Ç–µ –∫–æ–¥ —Å–æ–≥–ª–∞—Å–Ω–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤—ã—à–µ
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª

### –®–∞–≥ 3: –ó–∞–≥—Ä—É–∑–∫–∞

```bash
pio run --target upload
```

### –®–∞–≥ 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –ù–∞–∂–º–∏—Ç–µ RST –Ω–∞ ESP32
2. –ñ–¥–∏—Ç–µ 10 —Å–µ–∫—É–Ω–¥ ‚Üí –∞–≤—Ç–æ–±—Ä–æ—Å–æ–∫
3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É ‚Üí –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –±—Ä–æ—Å–æ–∫!

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ö–Ω–æ–ø–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –∫–æ–Ω—Ç–∞–∫—Ç—ã (–æ–¥–∏–Ω –Ω–∞ GPIO 15, –¥—Ä—É–≥–æ–π –Ω–∞ GND)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏ `INPUT_PULLUP` –≤ –∫–æ–¥–µ
- –•–æ—Ä–æ—à–∏–µ –ª–∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã –ø—Ä–æ–≤–æ–¥–æ–≤

**–î–æ–±–∞–≤—å—Ç–µ –æ—Ç–ª–∞–¥–∫—É –≤ loop():**
```cpp
Serial.print("Button state: ");
Serial.println(digitalRead(BUTTON_PIN));  // 1 = –Ω–µ –Ω–∞–∂–∞—Ç–∞, 0 = –Ω–∞–∂–∞—Ç–∞
delay(100);
```

### –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è

–£–≤–µ–ª–∏—á—å—Ç–µ –∞–Ω—Ç–∏–¥—Ä–µ–±–µ–∑–≥:
```cpp
unsigned long debounceDelay = 200;  // –ë—ã–ª–æ 50
```

## üìä –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ö–µ–º–∞

```
ESP32 –ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è:

–î–∏—Å–ø–ª–µ–π ST7735:
  VCC   ‚Üí 3.3V
  GND   ‚Üí GND
  CS    ‚Üí GPIO 5
  RESET ‚Üí GPIO 4
  DC    ‚Üí GPIO 2
  MOSI  ‚Üí GPIO 23
  SCLK  ‚Üí GPIO 18
  LED   ‚Üí 3.3V (—á–µ—Ä–µ–∑ 220Œ©)

–ö–Ω–æ–ø–∫–∞:
  –ö–æ–Ω—Ç–∞–∫—Ç 1 ‚Üí GPIO 15
  –ö–æ–Ω—Ç–∞–∫—Ç 2 ‚Üí GND
```

## ‚ú® –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### A. –í—Å–ø—ã—à–∫–∞ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏

–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–¥ –±—Ä–æ—Å–∫–æ–º –≤ –±–ª–æ–∫–µ –∫–Ω–æ–ø–∫–∏:
```cpp
if (buttonState == LOW) {
  if ((millis() - lastDebounceTime) > debounceDelay) {
    // –í—Å–ø—ã—à–∫–∞ —ç–∫—Ä–∞–Ω–∞
    tft.fillScreen(ST7735_YELLOW);
    delay(100);
    tft.fillScreen(ST7735_BLACK);
    
    // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –±—Ä–æ—Å–∫–∞ ...
  }
}
```

### –ë. –°—á–µ—Ç—á–∏–∫ –±—Ä–æ—Å–∫–æ–≤

–î–æ–±–∞–≤—å—Ç–µ –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é:
```cpp
int rollCount = 0;
```

–í –æ–±–æ–∏—Ö –±–ª–æ–∫–∞—Ö –±—Ä–æ—Å–∫–∞ (–∫–Ω–æ–ø–∫–∞ –∏ –∞–≤—Ç–æ):
```cpp
rollCount++;

// ... –ø–æ—Å–ª–µ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –∫—É–±–∏–∫–æ–≤ ...

tft.setCursor(45, 5);
tft.setTextColor(ST7735_GREEN, ST7735_BLACK);
tft.setTextSize(1);
tft.print("Roll #");
tft.print(rollCount);
```

---

**–£–¥–∞—á–∏ —Å –∫–Ω–æ–ø–∫–æ–π! üé≤üîò**